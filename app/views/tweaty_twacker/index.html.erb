<%= render :partial => 'nav' %>

<%= list_item_count_sentence( 'treaty', @instruments.size ) %>

<%= render :partial => 'library_design/feeds/feeds' %>

<ol class="unnumbered" role="list">
	<%= render :partial => 'instrument', :collection => @instruments %>
</ol>

<details id="sparql">
  <summary>SPARQL queries used by this page</summary>
  <textarea>
	  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
	  PREFIX : <https://id.parliament.uk/schema/>
	  PREFIX id: <https://id.parliament.uk/>
	  SELECT ?Treaty ?treatyTitle ?LeadOrgName ?seriesCitation ?laidDate ?WorkPackageURL  WHERE {
	   ?Treaty a :Treaty;
	           :name ?treatyTitle ;
	           :treatyHasLeadGovernmentOrganisation ?LeadOrg;
	           :workPackagedThingHasWorkPackage ?workPackage;
	           :treatyHasSeriesMembership ?series;
	           :laidThingHasLaying ?laying.
	   ?LeadOrg :name ?LeadOrgName.
	   ?series :seriesItemCitation ?seriesCitation.
	   ?laying :date ?laidDate.
	    ?laying :businessItemHasProcedureStep id:cspzmb6w.  
	    BIND(STR(?workPackage) AS ?workPackageStr)
	    BIND(REPLACE(?workPackageStr, '^.*[/#]', '') AS ?workPackageID)
	    BIND(CONCAT('https://api.parliament.uk/procedure-browser/work-packages/', ?workPackageID) AS ?WorkPackageURL)
	  } order by desc(?laidDate)
  </textarea>
</details>